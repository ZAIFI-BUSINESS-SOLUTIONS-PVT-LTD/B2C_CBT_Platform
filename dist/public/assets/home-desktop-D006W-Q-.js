import{m as G,r as o,j as e,T as Z,a as ee,b as te,c as se,d as O,S as M,k as w,n as ae,l as N,o as le,B as p,g as A,p as re,q as ie,s as ne,t as oe,v as ce,u as K,G as de,e as xe,f as W,h as R,w as F,x as J,y as X,z as me,A as he}from"./main-CzoStkir.js";import{H as ue}from"./header-desktop-BFuvCPr5.js";import{T as ge,C as fe}from"./timer-BF0kR2mK.js";import{A as Y}from"./arrow-right-ngodYIRy.js";import{T as E}from"./trophy-CDbnqmnR.js";import{T as pe}from"./target-CH9tEfFf.js";import"./profile-avatar-D9cO9Vj4.js";import"./scroll-area-WtX7C85G.js";import"./notepad-text-7swJf2ST.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],je=G("history",be);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],D=G("notebook-pen",ye);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],we=G("share-2",ve),Ne=({sections:a=[],emptyMessage:l="No content available",height:i=330})=>{const[s,d]=o.useState(0);if(!Array.isArray(a)||a.length===0)return e.jsx("p",{className:"text-gray-500 text-center py-4",children:l});const n=a[s],j=()=>d(x=>x===0?a.length-1:x-1),u=()=>d(x=>x===a.length-1?0:x+1),g=typeof i=="number"?`${i}px`:i;return e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"card rounded-2xl border border-gray-250 bg-white w-full relative h-full flex flex-col",style:{height:g,overflow:"visible"},children:[e.jsxs("div",{className:"py-6 px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n.icon&&e.jsx("span",{className:"inline-flex items-center",children:n.icon}),e.jsx("h3",{className:"text-primary text-xl font-semibold",children:n.title}),n.tag&&(n.tagTooltip?e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(te,{asChild:!0,children:e.jsx("span",{className:"ml-2 inline-flex",children:n.tag})}),e.jsx(se,{children:n.tagTooltip})]})}):e.jsx("span",{className:"ml-2",children:n.tag}))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{"aria-label":"Previous section",onClick:j,className:"flex items-center justify-center w-8 h-8 rounded-md bg-white border border-gray-200 hover:bg-gray-200 text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("button",{"aria-label":"Next section",onClick:u,className:"flex items-center justify-center w-8 h-8 rounded-md bg-white border border-gray-200 hover:bg-gray-200 text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})})]})]}),n.subtitle&&e.jsx("div",{className:"text-gray-500 text-sm mt-1",children:n.subtitle})]}),e.jsx("div",{className:"px-6 py-2 flex-1 overflow-y-auto flex items-start justify-center",children:Array.isArray(n.items)&&n.items.length>0?e.jsx("ul",{className:"space-y-3 w-full max-w-3xl",children:n.items.map((x,m)=>e.jsxs("li",{className:"flex items-start gap-3 text-gray-800 leading-relaxed",children:[e.jsx("div",{className:"flex-shrink-0 mt-2",children:e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-700"})}),e.jsx("div",{className:"text-md",children:x})]},m))}):e.jsxs("div",{className:"text-gray-500 text-xl",children:["No ",n.title.toLowerCase()," available."]})}),e.jsx("div",{className:"flex items-center justify-center pb-5",children:e.jsx("div",{className:"flex gap-2",children:a.map((x,m)=>e.jsx("button",{onClick:()=>d(m),"aria-label":`Go to section ${m+1}`,className:`w-2 h-2 rounded-full transition-all duration-300 ${s===m?"bg-secondary w-6":"bg-gray-300 hover:bg-gray-400"}`},m))})})]})})};function ke({className:a=""}){O();const l=!0,i=["How can I improve my algebra?","Create a 2-week study plan","Time management tips for exams"],[s,d]=o.useState(""),[n,j]=o.useState(!1),[u,g]=o.useState(!1),[x,m]=o.useState(!1),[y,k]=o.useState(M.DEFAULT_LANGUAGE),b=o.useRef(null);return o.useEffect(()=>{const h=window.SpeechRecognition||window.webkitSpeechRecognition;if(h){m(!0);const t=new h;t.continuous=M.RECOGNITION_SETTINGS.continuous,t.interimResults=M.RECOGNITION_SETTINGS.interimResults,t.lang=y,t.maxAlternatives=M.RECOGNITION_SETTINGS.maxAlternatives,t.onresult=T=>{let C="";for(let f=0;f<T.results.length;f++)C+=T.results[f][0].transcript;d(C),setTimeout(()=>{const f=document.querySelector('textarea[placeholder="Ask anything..."]');f&&(f.style.height="auto",f.style.height=f.scrollHeight+"px")},0)},t.onstart=()=>g(!0),t.onend=()=>g(!1),t.onerror=()=>g(!1),b.current=t}else m(!1);return()=>{b.current&&b.current.abort()}},[y]),e.jsx("div",{className:`w-full h-full ${a}`,children:e.jsxs(w,{className:"relative bg-gradient-to-br from-white via-white to-slate-50/50 rounded-2xl shadow-xl backdrop-blur-sm h-full flex flex-col",children:[e.jsx(ae,{shineColor:["#a855f7","#3b82f6","#0ea5e9"]}),e.jsx("div",{className:"absolute inset-0 -z-10 pointer-events-none overflow-hidden rounded-2xl",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",viewBox:"0 0 800 600","aria-hidden":!0,children:[e.jsxs("defs",{children:[e.jsxs("pattern",{id:"diagonalLines",patternUnits:"userSpaceOnUse",width:"120",height:"120",patternTransform:"rotate(22)",children:[e.jsx("rect",{width:"120",height:"120",fill:"transparent"}),e.jsx("path",{d:"M0 120 L120 0",stroke:"rgba(15,23,42,0.04)",strokeWidth:"1"})]}),e.jsxs("linearGradient",{id:"softGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#eef2ff",stopOpacity:"1"})]})]}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#diagonalLines)"}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#softGradient)",opacity:"0.06"})]})}),e.jsxs(N,{className:"p-4 flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 blur-md opacity-30"}),e.jsx("div",{className:"relative w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 flex items-center justify-center shadow-xl ring-2 ring-white/40",children:e.jsx(le,{className:"h-6 w-6 text-white drop-shadow-sm"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-md text-slate-600 mt-0.5 font-medium leading-relaxed",children:"Your own personal AI study assistant"})})]})}),e.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center px-3 py-2",children:e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-4",children:x&&u?e.jsxs("div",{className:"flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-emerald-50 via-green-50 to-emerald-50 rounded-2xl border border-green-200/60 shadow-sm backdrop-blur-sm",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"400ms"}})]}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Listening... Tap âœ“ to send"})]}):x?e.jsxs("div",{className:"w-full max-w-sm text-center",children:[e.jsxs("div",{className:"mt-3 relative",children:[e.jsx(p,{size:"lg",variant:"default",onClick:()=>{},className:"rounded-xl px-4",children:"Go to Chatbot"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:e.jsx("div",{className:"w-full h-full rounded-xl bg-white/60 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center border border-blue-100",children:e.jsx(A,{className:"w-5 h-5 text-blue-600"})}),e.jsx("span",{className:"text-xs text-gray-600",children:"Coming soon"})]})})})]}),e.jsx("div",{className:"mt-3 flex flex-wrap justify-center gap-2",children:i.map(h=>e.jsx(p,{size:"sm",variant:"ghost",onClick:()=>{},className:"rounded-xl border px-3 py-2 text-sm min-w-[10rem] max-w-xs truncate",disabled:l,children:h},h))})]}):e.jsx("div",{className:"text-xs text-slate-500 text-center py-3 px-4 bg-slate-50/50 rounded-xl border border-slate-200/50",children:"Voice input not supported"})})}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(re,{value:s,onChange:h=>{},onKeyDown:h=>{{h.preventDefault();return}},placeholder:"Ask anything...",disabled:n||l,className:"border-slate-200/80 rounded-full text-sm focus:border-blue-300 focus:ring-blue-100 focus:ring-1 shadow-sm transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md pl-4 pr-20 h-12"}),e.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[x&&e.jsx(p,{type:"button",size:"icon",variant:"ghost",onClick:()=>{},disabled:n||l,className:`h-10 w-10 p-0 rounded-full transition-all duration-200 hover:scale-105 ${u?"text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:u?e.jsx(ie,{className:"h-6 w-6"}):e.jsx(ne,{className:"h-6 w-6"})}),e.jsx(p,{type:"button",size:"icon",onClick:()=>{},disabled:!s.trim()||n||l,className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100",children:n?e.jsx(oe,{className:"h-4 w-4 animate-spin"}):e.jsx(ce,{className:"h-4 w-4"})})]})]})})})]}),e.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center pointer-events-auto",children:e.jsx("div",{className:"w-full h-full rounded-2xl bg-white/60 backdrop-blur-sm border border-gray-200 flex items-center justify-center p-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-blue-50 flex items-center justify-center border border-blue-100",children:e.jsx(A,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Coming soon"}),e.jsx("p",{className:"text-xs text-gray-600 max-w-xs text-center",children:"The Chatbot is being rolled out soon. It will be available for students shortly."})]})})})]})})}function Te({analytics:a}){const{student:l}=K(),[,i]=O();return o.useMemo(()=>l?l.fullName&&l.fullName.trim().length>0?l.fullName.trim():l.email&&l.email.includes("@")?l.email.split("@")[0]:"Student":"Student",[l]),e.jsx("div",{className:"text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(w,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(N,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(de,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Your Average Score"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:a?`${Math.round(a.overallAccuracy??0)} %`:"0 %"})})]})}),e.jsx(w,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(N,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(ge,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Avg. Speed /Question"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:a?`${Math.round(a.averageTimePerQuestion??0)} sec.`:"0 sec."})})]})}),e.jsx(w,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(N,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(fe,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Questions attended"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:a?`${a.uniqueQuestionsAttempted??0}`:"0"})})]})}),e.jsxs(w,{className:"rounded-2xl border transition-transform duration-150 hover:-translate-y-0.5 hover:shadow-lg cursor-pointer overflow-hidden flex flex-col justify-center h-full bg-white",onClick:()=>i("/dashboard"),children:[e.jsx(N,{className:"relative z-10 p-3 flex items-center justify-center h-28 sm:h-24",children:e.jsxs("div",{role:"link",className:"text-sm md:text-base text-black font-bold flex items-center gap-2",tabIndex:0,onClick:s=>{s.stopPropagation(),i("/dashboard")},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),i("/dashboard"))},children:["View more",e.jsx(Y,{className:"h-4 w-4 ml-1 text-black"})]})}),e.jsx("div",{className:"hidden lg:block absolute right-0 top-0 h-full w-1 bg-white/20","aria-hidden":!0})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-0 mt-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{children:e.jsxs(p,{variant:"default",size:"lg",onClick:()=>i("/topics"),"aria-label":"View Test ArrowRight",className:"w-full rounded-xl font-bold",children:["Take a Test",e.jsx(Y,{className:"h-4 w-4 ml-2"})]})})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{children:e.jsxs(p,{variant:"outline",size:"lg",onClick:()=>i("/topics"),"aria-label":"View Test History",className:"w-full rounded-xl border border-blue-500 bg-blue-50 text-blue-600",children:["View Test History",e.jsx(je,{className:"h-4 w-4 ml-2"})]})})})]})})]})})}const v=a=>{if(!a)return"just now";try{const l=new Date(a);if(isNaN(l.getTime()))return"just now";const s=Math.floor((new Date().getTime()-l.getTime())/1e3);return s<0||s<60?"just now":s<3600?`${Math.floor(s/60)} minute${Math.floor(s/60)===1?"":"s"} ago`:s<86400?`${Math.floor(s/3600)} hour${Math.floor(s/3600)===1?"":"s"} ago`:s<604800?`${Math.floor(s/86400)} day${Math.floor(s/86400)===1?"":"s"} ago`:s<2592e3?`${Math.floor(s/604800)} week${Math.floor(s/604800)===1?"":"s"} ago`:s<31536e3?`${Math.floor(s/2592e3)} month${Math.floor(s/2592e3)===1?"":"s"} ago`:`${Math.floor(s/31536e3)} year${Math.floor(s/31536e3)===1?"":"s"} ago`}catch(l){return console.warn("Error parsing date for relative time:",a,l),"just now"}},Ce=()=>{const a=new Date;console.log("Testing formatRelativeTime function:"),console.log("Just now:",v(a.toISOString())),console.log("5 minutes ago:",v(new Date(a.getTime()-5*60*1e3).toISOString())),console.log("2 hours ago:",v(new Date(a.getTime()-2*60*60*1e3).toISOString())),console.log("1 day ago:",v(new Date(a.getTime()-24*60*60*1e3).toISOString())),console.log("Invalid date:",v("invalid-date")),console.log("Null:",v(null))},z={container:"p-3 rounded-xl",text:"text-sm",variants:{blue:{container:"bg-gray-200",text:"text-gray-700",accent:"text-blue-600",accentBg:"bg-blue-50"},indigo:{container:"bg-gray-200",text:"text-gray-700",accent:"text-indigo-600",accentBg:"bg-indigo-50"},green:{container:"bg-gray-200",text:"text-gray-700",accent:"text-green-600",accentBg:"bg-green-50"},red:{container:"bg-gray-200",text:"text-gray-700",accent:"text-red-600",accentBg:"bg-red-50"},gray:{container:"bg-gray-200",text:"text-gray-700",accent:"text-gray-600",accentBg:"bg-gray-50"}}},Se=({children:a,variant:l,className:i=""})=>{const s=z.variants[l];return e.jsx("div",{className:`${z.container} ${s.container} ${i}`,children:e.jsx("div",{className:`${z.text} ${s.text}`,children:a})})},Ie=({title:a="Check out my NEET preparation progress!",description:l="I'm preparing for NEET 2026 with InzightEd. Join me on this journey!",url:i=window.location.origin,type:s="app",score:d,subject:n,className:j=""})=>{const[u,g]=o.useState(!1),m=(()=>{switch(s){case"achievement":return{title:`ðŸ† Achievement Unlocked! ${d?`Scored ${d}%`:""}`,description:`I just achieved a milestone in my NEET preparation! ${n?`in ${n}`:""}`,emoji:"ðŸ†"};case"result":return{title:`ðŸ“Š Test Result: ${d?`${d}%`:"Completed"}`,description:`Just completed a ${n||"practice"} test. ${d?`Scored ${d}%!`:"Keep practicing!"} `,emoji:"ðŸ“Š"};case"progress":return{title:"ðŸ“ˆ Study Progress Update",description:`Making great progress in my NEET preparation journey! ${d?`${d}% complete`:""}`,emoji:"ðŸ“ˆ"};default:return{title:a,description:l,emoji:"ðŸŽ¯"}}})(),y=`${m.emoji} ${m.title}

${m.description}

${i}`,k=async()=>{try{await navigator.clipboard.writeText(y),g(!0),setTimeout(()=>g(!1),2e3)}catch(t){console.error("Failed to copy:",t)}},b=async()=>{if("share"in navigator)try{await navigator.share({title:m.title,text:m.description,url:i})}catch(t){console.log("Error sharing:",t)}},h=[{name:"Copy Link",icon:he,action:k,color:"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200",available:!0}];return e.jsx("div",{className:`h-full ${j}`,children:e.jsxs(w,{className:"bg-white border shadow-lg",children:[e.jsx(F,{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx(J,{className:"text-xl font-semibold text-gray-800",children:"Study with your friends"}),e.jsx("p",{className:"text-base text-gray-600",children:"Share with your friends and prepare with them together"})]})}),s!=="app"&&e.jsxs(X,{variant:"secondary",className:"bg-gray-100 text-gray-700 border-gray-200",children:[s==="achievement"&&e.jsx(E,{className:"w-4 h-4 mr-1"}),s==="result"&&e.jsx(pe,{className:"w-4 h-4 mr-1"}),s==="progress"&&e.jsx(me,{className:"w-4 h-4 mr-1"}),s.charAt(0).toUpperCase()+s.slice(1)]})]})}),e.jsx(N,{className:"px-6 pb-6",children:e.jsxs("div",{className:"space-y-3",children:[h.map(t=>e.jsxs(p,{variant:"outline",size:"lg",onClick:t.action,className:`${t.color} font-medium w-full`,children:[e.jsx(t.icon,{className:"w-5 h-5 mr-2"}),t.name]},t.name)),"share"in navigator&&e.jsxs(p,{variant:"default",size:"lg",onClick:b,className:"w-full bg-black text-white hover:bg-gray-800 font-medium",children:[e.jsx(we,{className:"w-5 h-5 mr-2"}),"Share with friends"]})]})})]})})},$e=()=>{const l=(()=>{const i=new Date("2026-05-03"),s=new Date,d=i.getTime()-s.getTime(),n=Math.ceil(d/(1e3*3600*24));return Math.max(0,n)})();return e.jsx("div",{children:e.jsx(w,{className:"bg-black/70 backdrop-blur-xl shadow-2xl",children:e.jsx(F,{className:"py-3 px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx(J,{className:"text-xl font-semibold text-white",children:"NEET 2026"}),e.jsx("p",{className:"text-base text-gray-300",children:"Exam date: May 3, 2026"})]})}),e.jsx(X,{variant:"secondary",className:"bg-white/10 text-blue-500 border-blue-500 backdrop-blur-sm pt-1",children:l===1?"1 Day Left":`${l} Days Left`})]})})})})};function Pe(){const{isAuthenticated:a,loading:l,student:i}=K(),[,s]=O();xe();const d=!!(i!=null&&i.institution);o.useEffect(()=>{console.log("ðŸ« Institution check (Desktop):",{student:i,hasInstitution:d,institutionData:i==null?void 0:i.institution})},[i,d]);const[n,j]=o.useState(0),[u,g]=o.useState(null),[x,m]=o.useState(null);o.useState(!1),o.useRef(null);const y=o.useRef(null),k=o.useCallback(()=>{j(r=>(r+1)%4)},[]),b=o.useCallback(()=>{j(r=>(r-1+4)%4)},[]);o.useCallback(r=>{m(null),g({x:r.targetTouches[0].clientX,y:r.targetTouches[0].clientY})},[]),o.useCallback(r=>{m({x:r.targetTouches[0].clientX,y:r.targetTouches[0].clientY})},[]),o.useCallback(()=>{if(!u||!x)return;const r=u.x-x.x,S=u.y-x.y,I=r>50,$=r<-50;Math.abs(S)>Math.abs(r)||(I?k():$&&b())},[u,x,k,b]);const{data:h}=W({queryKey:["/api/dashboard/comprehensive-analytics/"],refetchInterval:3e4,enabled:a&&!l}),{data:t}=W({queryKey:["/api/insights/student/"],refetchInterval:3e4,enabled:a&&!l}),T=o.useMemo(()=>{var S,I,$,L,P,B,_,H,q,V,Q,U;const r=[];return($=(I=(S=t==null?void 0:t.data)==null?void 0:S.llmInsights)==null?void 0:I.studyPlan)!=null&&$.insights&&t.data.llmInsights.studyPlan.insights.length>0?r.push({title:"Study Plan",items:t.data.llmInsights.studyPlan.insights.map(c=>(c==null?void 0:c.text)??c),icon:e.jsx(D,{className:"w-4 h-4"}),subtitle:"Personalized study plan"}):(L=t==null?void 0:t.data)!=null&&L.improvementTopics&&t.data.improvementTopics.length>0?r.push({title:"Study Plan",items:t.data.improvementTopics.slice(0,5).map(c=>`${c.topic} â€” ${c.accuracy}%`),icon:e.jsx(D,{className:"w-4 h-4"}),subtitle:"Recommended focus areas"}):r.push({title:"Study Plan",items:["Take tests to get AI-generated study plans!"],icon:e.jsx(D,{className:"w-4 h-4"})}),(_=(B=(P=t==null?void 0:t.data)==null?void 0:P.llmInsights)==null?void 0:B.strengths)!=null&&_.insights&&t.data.llmInsights.strengths.insights.length>0?r.push({title:"Strengths",items:t.data.llmInsights.strengths.insights.map(c=>(c==null?void 0:c.text)??c),icon:e.jsx(E,{className:"w-4 h-4"})}):(H=t==null?void 0:t.data)!=null&&H.strengthTopics&&t.data.strengthTopics.length>0?r.push({title:"Strengths",items:t.data.strengthTopics.slice(0,5).map(c=>`${c.topic} â€” ${c.accuracy}%`),icon:e.jsx(E,{className:"w-4 h-4"})}):r.push({title:"Strengths",items:["Take tests to get AI analysis of your strengths!"],icon:e.jsx(E,{className:"w-4 h-4"})}),(Q=(V=(q=t==null?void 0:t.data)==null?void 0:q.llmInsights)==null?void 0:V.weaknesses)!=null&&Q.insights&&t.data.llmInsights.weaknesses.insights.length>0?r.push({title:"Weaknesses",items:t.data.llmInsights.weaknesses.insights.map(c=>(c==null?void 0:c.text)??c),icon:e.jsx(R,{className:"w-4 h-4"})}):(U=t==null?void 0:t.data)!=null&&U.weakTopics&&t.data.weakTopics.length>0?r.push({title:"Weaknesses",items:t.data.weakTopics.slice(0,5).map(c=>`${c.topic} â€” ${c.accuracy}%`),icon:e.jsx(R,{className:"w-4 h-4"})}):r.push({title:"Weaknesses",items:["Take tests to get AI analysis of your weaknesses!"],icon:e.jsx(R,{className:"w-4 h-4"})}),r},[t,h]);if(o.useEffect(()=>{if(y.current){const r=y.current.querySelector(`[data-tab-id="${n}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[n]),o.useEffect(()=>{var r;Ce(),t&&(console.log("Insights data:",t),console.log("Cache info:",t.cacheInfo),(r=t.cacheInfo)!=null&&r.lastModified&&(console.log("Last modified:",t.cacheInfo.lastModified),console.log("Formatted time:",v(t.cacheInfo.lastModified))))},[t]),!a)return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-indigo-50",children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Checking authentication..."})}):(s("/login"),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-indigo-50",children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Redirecting to login..."})}));const C=h&&h.totalTests>0;return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 text-text",children:[e.jsx(ue,{}),e.jsxs("main",{className:"flex-1 flex flex-col bg-gray-50 mt-20 mb-24 transition-all duration-300 md:ml-64 relative",children:[d&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/60 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border-2 border-gray-300 max-w-md mx-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full",children:e.jsx(A,{className:"h-16 w-16 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-2"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"This feature is not available for institution-enrolled students. Please access your institution-specific tests and resources."})]})]})})}),e.jsx("div",{className:d?"blur-lg pointer-events-none select-none":"","aria-hidden":d,children:e.jsx("div",{className:"w-full max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 px-4 pt-4 items-stretch",children:[e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"h-full flex flex-col",children:C?e.jsx("div",{className:"h-full flex-1 flex",children:e.jsx("div",{className:"flex-1",children:e.jsx(Ne,{sections:T,height:"100%"})})}):e.jsx(Se,{variant:"blue",className:"h-full flex items-center",children:e.jsxs("div",{className:"w-full p-6 flex flex-col items-center justify-center gap-4 max-w-xl mx-auto text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(A,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Get personalized insights"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Take your first practice test to unlock AI study plans, strengths and weaknesses analysis."}),e.jsx("div",{className:"w-full mt-3 flex justify-center",children:e.jsx(p,{variant:"default",size:"lg",onClick:()=>s("/topics"),className:"rounded-lg font-bold px-6",children:"Take a Test"})})]})})})}),e.jsx("div",{className:"h-full",children:e.jsx(Te,{analytics:h})}),e.jsx("div",{className:"min-h-0 h-full",children:e.jsx(ke,{className:"max-w-full h-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"pb-4",children:e.jsx(Ie,{type:"app"})}),e.jsx("div",{children:e.jsx($e,{})})]})]})})})]})]})}export{Pe as default};
