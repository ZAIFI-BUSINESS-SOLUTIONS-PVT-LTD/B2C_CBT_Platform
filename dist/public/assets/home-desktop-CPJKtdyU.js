import{r as d,j as e,l as te,m as se,n as ae,o as le,a as G,S as A,C as S,p as ie,b as I,q as re,f as b,I as ne,s as oe,t as ce,v as de,w as me,A as W,x as he,u as J,G as xe,h as ue,i as K,T as L,c as X,d as Z,B as ee,e as ge,g as fe}from"./index-DO7ipTtv.js";import{H as pe}from"./header-desktop-PIHdkxav.js";import{T as je}from"./timer-CVZko_se.js";import{C as be,H as M,N as D,L as we,S as ye}from"./share-2-CSPVMjf5.js";import{A as Y}from"./arrow-right-DlLAh1a7.js";import{T as E}from"./trophy-DXzqvxS5.js";import{T as Ne}from"./target-tuS1hT4-.js";import"./profile-avatar-DVANyC95.js";import"./scroll-area-Ck6sU6jm.js";import"./notepad-text-BLVCxvgk.js";const ve=({sections:i=[],emptyMessage:o="No content available",height:m=330})=>{const[s,h]=d.useState(0);if(!Array.isArray(i)||i.length===0)return e.jsx("p",{className:"text-gray-500 text-center py-4",children:o});const n=i[s],w=()=>h(u=>u===0?i.length-1:u-1),p=()=>h(u=>u===i.length-1?0:u+1),j=typeof m=="number"?`${m}px`:m;return e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"card rounded-2xl border border-gray-250 bg-white w-full relative h-full flex flex-col",style:{height:j,overflow:"visible"},children:[e.jsxs("div",{className:"py-6 px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n.icon&&e.jsx("span",{className:"inline-flex items-center",children:n.icon}),e.jsx("h3",{className:"text-primary text-xl font-semibold",children:n.title}),n.tag&&(n.tagTooltip?e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,children:e.jsx("span",{className:"ml-2 inline-flex",children:n.tag})}),e.jsx(le,{children:n.tagTooltip})]})}):e.jsx("span",{className:"ml-2",children:n.tag}))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{"aria-label":"Previous section",onClick:w,className:"flex items-center justify-center w-8 h-8 rounded-md bg-white border border-gray-200 hover:bg-gray-200 text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("button",{"aria-label":"Next section",onClick:p,className:"flex items-center justify-center w-8 h-8 rounded-md bg-white border border-gray-200 hover:bg-gray-200 text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})})]})]}),n.subtitle&&e.jsx("div",{className:"text-gray-500 text-sm mt-1",children:n.subtitle})]}),e.jsx("div",{className:"px-6 py-2 flex-1 overflow-y-auto flex items-start justify-center",children:Array.isArray(n.items)&&n.items.length>0?e.jsx("ul",{className:"space-y-3 w-full max-w-3xl",children:n.items.map((u,x)=>e.jsxs("li",{className:"flex items-start gap-3 text-gray-800 leading-relaxed",children:[e.jsx("div",{className:"flex-shrink-0 mt-2",children:e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-700"})}),e.jsx("div",{className:"text-md",children:u})]},x))}):e.jsxs("div",{className:"text-gray-500 text-xl",children:["No ",n.title.toLowerCase()," available."]})}),e.jsx("div",{className:"flex items-center justify-center pb-5",children:e.jsx("div",{className:"flex gap-2",children:i.map((u,x)=>e.jsx("button",{onClick:()=>h(x),"aria-label":`Go to section ${x+1}`,className:`w-2 h-2 rounded-full transition-all duration-300 ${s===x?"bg-secondary w-6":"bg-gray-300 hover:bg-gray-400"}`},x))})})]})})};function Te({className:i=""}){const[,o]=G(),m=["How can I improve my algebra?","Create a 2-week study plan","Time management tips for exams"],[s,h]=d.useState(""),[n,w]=d.useState(!1),[p,j]=d.useState(!1),[u,x]=d.useState(!1),[v,T]=d.useState(A.DEFAULT_LANGUAGE),t=d.useRef(null);d.useEffect(()=>{const l=window.SpeechRecognition||window.webkitSpeechRecognition;if(l){x(!0);const c=new l;c.continuous=A.RECOGNITION_SETTINGS.continuous,c.interimResults=A.RECOGNITION_SETTINGS.interimResults,c.lang=v,c.maxAlternatives=A.RECOGNITION_SETTINGS.maxAlternatives,c.onresult=y=>{let N="";for(let f=0;f<y.results.length;f++)N+=y.results[f][0].transcript;h(N),setTimeout(()=>{const f=document.querySelector('textarea[placeholder="Ask anything..."]');f&&(f.style.height="auto",f.style.height=f.scrollHeight+"px")},0)},c.onstart=()=>j(!0),c.onend=()=>j(!1),c.onerror=()=>j(!1),t.current=c}else x(!1);return()=>{t.current&&t.current.abort()}},[v]);const $=()=>({Authorization:`Bearer ${he()}`,"Content-Type":"application/json"}),g=l=>{if(!l)return"New Chat";let c=l.trim();return c.length>40&&(c=c.slice(0,40).trim()+"..."),c.charAt(0).toUpperCase()+c.slice(1)},R=async l=>{try{w(!0);const c=`${W.BASE_URL}${W.ENDPOINTS.CHAT_SESSIONS}`,y=g(l),N=await fetch(c,{method:"POST",headers:$(),body:JSON.stringify({sessionTitle:y})});if(N.ok){const f=await N.json();o(`/chatbot?sessionId=${f.chatSessionId}&message=${encodeURIComponent(l)}`)}else console.error("Failed to create session")}catch(c){console.error("Failed to create session:",c)}finally{w(!1)}},a=l=>{l.trim()&&(h(""),setTimeout(()=>{const c=document.querySelector('textarea[placeholder="Ask anything..."]');c&&(c.style.height="auto",c.style.height=c.scrollHeight+"px")},0),R(l))},C=()=>{if(u){if(p)t.current&&t.current.stop(),setTimeout(()=>{s.trim()&&a(s.trim())},100);else if(t.current)try{h(""),setTimeout(()=>{const l=document.querySelector('textarea[placeholder="Ask anything..."]');l&&(l.style.height="auto",l.style.height=l.scrollHeight+"px")},0),t.current.start()}catch(l){console.error("Failed to start speech recognition:",l),j(!1)}}};return e.jsx("div",{className:`w-full h-full ${i}`,children:e.jsxs(S,{className:"bg-gradient-to-br from-white via-white to-slate-50/50 rounded-2xl shadow-xl backdrop-blur-sm h-full flex flex-col",children:[e.jsx(ie,{shineColor:["#a855f7","#3b82f6","#0ea5e9"]}),e.jsx("div",{className:"absolute inset-0 -z-10 pointer-events-none overflow-hidden rounded-2xl",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",viewBox:"0 0 800 600","aria-hidden":!0,children:[e.jsxs("defs",{children:[e.jsxs("pattern",{id:"diagonalLines",patternUnits:"userSpaceOnUse",width:"120",height:"120",patternTransform:"rotate(22)",children:[e.jsx("rect",{width:"120",height:"120",fill:"transparent"}),e.jsx("path",{d:"M0 120 L120 0",stroke:"rgba(15,23,42,0.04)",strokeWidth:"1"})]}),e.jsxs("linearGradient",{id:"softGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#eef2ff",stopOpacity:"1"})]})]}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#diagonalLines)"}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#softGradient)",opacity:"0.06"})]})}),e.jsxs(I,{className:"p-4 flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 blur-md opacity-30"}),e.jsx("div",{className:"relative w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 flex items-center justify-center shadow-xl ring-2 ring-white/40",children:e.jsx(re,{className:"h-6 w-6 text-white drop-shadow-sm"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-md text-slate-600 mt-0.5 font-medium leading-relaxed",children:"Your own personal AI study assistant"})})]})}),e.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center px-3 py-2",children:e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-4",children:u&&p?e.jsxs("div",{className:"flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-emerald-50 via-green-50 to-emerald-50 rounded-2xl border border-green-200/60 shadow-sm backdrop-blur-sm",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"400ms"}})]}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Listening... Tap âœ“ to send"})]}):u?e.jsxs("div",{className:"w-full max-w-sm text-center",children:[e.jsx("div",{className:"mt-3",children:e.jsx(b,{size:"lg",variant:"default",onClick:()=>o("/chatbot"),className:"rounded-xl px-4",children:"Go to Chatbot"})}),e.jsx("div",{className:"mt-3 flex flex-wrap justify-center gap-2",children:m.map(l=>e.jsx(b,{size:"sm",variant:"ghost",onClick:()=>R(l),className:"rounded-xl border px-3 py-2 text-sm min-w-[10rem] max-w-xs truncate",children:l},l))})]}):e.jsx("div",{className:"text-xs text-slate-500 text-center py-3 px-4 bg-slate-50/50 rounded-xl border border-slate-200/50",children:"Voice input not supported"})})}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(ne,{value:s,onChange:l=>h(l.target.value),onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),s.trim()&&a(s.trim()))},placeholder:"Ask anything...",disabled:n,className:"border-slate-200/80 rounded-full text-sm focus:border-blue-300 focus:ring-blue-100 focus:ring-1 shadow-sm transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md pl-4 pr-20 h-12"}),e.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[u&&e.jsx(b,{type:"button",size:"icon",variant:"ghost",onClick:C,disabled:n,className:`h-10 w-10 p-0 rounded-full transition-all duration-200 hover:scale-105 ${p?"text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:p?e.jsx(oe,{className:"h-6 w-6"}):e.jsx(ce,{className:"h-6 w-6"})}),e.jsx(b,{type:"button",size:"icon",onClick:()=>{s.trim()&&a(s.trim())},disabled:!s.trim()||n,className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100",children:n?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(me,{className:"h-4 w-4"})})]})]})})})]})]})})}function ke({analytics:i}){const{student:o}=J(),[,m]=G();return d.useMemo(()=>o?o.fullName&&o.fullName.trim().length>0?o.fullName.trim():o.email&&o.email.includes("@")?o.email.split("@")[0]:"Student":"Student",[o]),e.jsx("div",{className:"text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(S,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(I,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(xe,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Your Average Score"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:i?`${Math.round(i.overallAccuracy??0)} %`:"0 %"})})]})}),e.jsx(S,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(I,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(je,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Avg. Speed /Question"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:i?`${Math.round(i.averageTimePerQuestion??0)} sec.`:"0 sec."})})]})}),e.jsx(S,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(I,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(be,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Questions attended"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:i?`${i.uniqueQuestionsAttempted??0}`:"0"})})]})}),e.jsxs(S,{className:"rounded-2xl border transition-transform duration-150 hover:-translate-y-0.5 hover:shadow-lg cursor-pointer overflow-hidden flex flex-col justify-center h-full bg-white",onClick:()=>m("/dashboard"),children:[e.jsx(I,{className:"relative z-10 p-3 flex items-center justify-center h-28 sm:h-24",children:e.jsxs("div",{role:"link",className:"text-sm md:text-base text-black font-bold flex items-center gap-2",tabIndex:0,onClick:s=>{s.stopPropagation(),m("/dashboard")},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),m("/dashboard"))},children:["View more",e.jsx(Y,{className:"h-4 w-4 ml-1 text-black"})]})}),e.jsx("div",{className:"hidden lg:block absolute right-0 top-0 h-full w-1 bg-white/20","aria-hidden":!0})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-0 mt-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{children:e.jsxs(b,{variant:"default",size:"lg",onClick:()=>m("/topics"),"aria-label":"View Test ArrowRight",className:"w-full rounded-xl font-bold",children:["Take a Test",e.jsx(Y,{className:"h-4 w-4 ml-2"})]})})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{children:e.jsxs(b,{variant:"outline",size:"lg",onClick:()=>m("/topics"),"aria-label":"View Test History",className:"w-full rounded-xl border border-blue-500 bg-blue-50 text-blue-600",children:["View Test History",e.jsx(M,{className:"h-4 w-4 ml-2"})]})})})]})})]})})}const k=i=>{if(!i)return"just now";try{const o=new Date(i);if(isNaN(o.getTime()))return"just now";const s=Math.floor((new Date().getTime()-o.getTime())/1e3);return s<0||s<60?"just now":s<3600?`${Math.floor(s/60)} minute${Math.floor(s/60)===1?"":"s"} ago`:s<86400?`${Math.floor(s/3600)} hour${Math.floor(s/3600)===1?"":"s"} ago`:s<604800?`${Math.floor(s/86400)} day${Math.floor(s/86400)===1?"":"s"} ago`:s<2592e3?`${Math.floor(s/604800)} week${Math.floor(s/604800)===1?"":"s"} ago`:s<31536e3?`${Math.floor(s/2592e3)} month${Math.floor(s/2592e3)===1?"":"s"} ago`:`${Math.floor(s/31536e3)} year${Math.floor(s/31536e3)===1?"":"s"} ago`}catch(o){return console.warn("Error parsing date for relative time:",i,o),"just now"}},Se=()=>{const i=new Date;console.log("Testing formatRelativeTime function:"),console.log("Just now:",k(i.toISOString())),console.log("5 minutes ago:",k(new Date(i.getTime()-5*60*1e3).toISOString())),console.log("2 hours ago:",k(new Date(i.getTime()-2*60*60*1e3).toISOString())),console.log("1 day ago:",k(new Date(i.getTime()-24*60*60*1e3).toISOString())),console.log("Invalid date:",k("invalid-date")),console.log("Null:",k(null))},O={container:"p-3 rounded-xl",text:"text-sm",variants:{blue:{container:"bg-gray-200",text:"text-gray-700",accent:"text-blue-600",accentBg:"bg-blue-50"},indigo:{container:"bg-gray-200",text:"text-gray-700",accent:"text-indigo-600",accentBg:"bg-indigo-50"},green:{container:"bg-gray-200",text:"text-gray-700",accent:"text-green-600",accentBg:"bg-green-50"},red:{container:"bg-gray-200",text:"text-gray-700",accent:"text-red-600",accentBg:"bg-red-50"},gray:{container:"bg-gray-200",text:"text-gray-700",accent:"text-gray-600",accentBg:"bg-gray-50"}}},Ce=({children:i,variant:o,className:m=""})=>{const s=O.variants[o];return e.jsx("div",{className:`${O.container} ${s.container} ${m}`,children:e.jsx("div",{className:`${O.text} ${s.text}`,children:i})})},Ie=({title:i="Check out my NEET preparation progress!",description:o="I'm preparing for NEET 2026 with InzightEd. Join me on this journey!",url:m=window.location.origin,type:s="app",score:h,subject:n,className:w=""})=>{const[p,j]=d.useState(!1),x=(()=>{switch(s){case"achievement":return{title:`ðŸ† Achievement Unlocked! ${h?`Scored ${h}%`:""}`,description:`I just achieved a milestone in my NEET preparation! ${n?`in ${n}`:""}`,emoji:"ðŸ†"};case"result":return{title:`ðŸ“Š Test Result: ${h?`${h}%`:"Completed"}`,description:`Just completed a ${n||"practice"} test. ${h?`Scored ${h}%!`:"Keep practicing!"} `,emoji:"ðŸ“Š"};case"progress":return{title:"ðŸ“ˆ Study Progress Update",description:`Making great progress in my NEET preparation journey! ${h?`${h}% complete`:""}`,emoji:"ðŸ“ˆ"};default:return{title:i,description:o,emoji:"ðŸŽ¯"}}})(),v=`${x.emoji} ${x.title}

${x.description}

${m}`,T=async()=>{try{await navigator.clipboard.writeText(v),j(!0),setTimeout(()=>j(!1),2e3)}catch(g){console.error("Failed to copy:",g)}},t=async()=>{if("share"in navigator)try{await navigator.share({title:x.title,text:x.description,url:m})}catch(g){console.log("Error sharing:",g)}},$=[{name:"Copy Link",icon:fe,action:T,color:"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200",available:!0}];return e.jsx("div",{className:`h-full ${w}`,children:e.jsxs(S,{className:"bg-white border shadow-lg",children:[e.jsx(X,{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx(Z,{className:"text-xl font-semibold text-gray-800",children:"Study with your friends"}),e.jsx("p",{className:"text-base text-gray-600",children:"Share with your friends and prepare with them together"})]})}),s!=="app"&&e.jsxs(ee,{variant:"secondary",className:"bg-gray-100 text-gray-700 border-gray-200",children:[s==="achievement"&&e.jsx(E,{className:"w-4 h-4 mr-1"}),s==="result"&&e.jsx(Ne,{className:"w-4 h-4 mr-1"}),s==="progress"&&e.jsx(ge,{className:"w-4 h-4 mr-1"}),s.charAt(0).toUpperCase()+s.slice(1)]})]})}),e.jsx(I,{className:"px-6 pb-6",children:e.jsxs("div",{className:"space-y-3",children:[$.map(g=>e.jsxs(b,{variant:"outline",size:"lg",onClick:g.action,className:`${g.color} font-medium w-full`,children:[e.jsx(g.icon,{className:"w-5 h-5 mr-2"}),g.name]},g.name)),"share"in navigator&&e.jsxs(b,{variant:"default",size:"lg",onClick:t,className:"w-full bg-black text-white hover:bg-gray-800 font-medium",children:[e.jsx(ye,{className:"w-5 h-5 mr-2"}),"Share with friends"]})]})})]})})},$e=()=>{const o=(()=>{const m=new Date("2026-05-03"),s=new Date,h=m.getTime()-s.getTime(),n=Math.ceil(h/(1e3*3600*24));return Math.max(0,n)})();return e.jsx("div",{children:e.jsx(S,{className:"bg-black/70 backdrop-blur-xl shadow-2xl",children:e.jsx(X,{className:"py-3 px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx(Z,{className:"text-xl font-semibold text-white",children:"NEET 2026"}),e.jsx("p",{className:"text-base text-gray-300",children:"Exam date: May 3, 2026"})]})}),e.jsx(ee,{variant:"secondary",className:"bg-white/10 text-blue-500 border-blue-500 backdrop-blur-sm pt-1",children:o===1?"1 Day Left":`${o} Days Left`})]})})})})};function Be(){const{isAuthenticated:i,loading:o}=J(),[,m]=G();ue();const[s,h]=d.useState(0),[n,w]=d.useState(null),[p,j]=d.useState(null);d.useState(!1),d.useRef(null);const u=d.useRef(null),x=d.useCallback(()=>{h(a=>(a+1)%4)},[]),v=d.useCallback(()=>{h(a=>(a-1+4)%4)},[]);d.useCallback(a=>{j(null),w({x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY})},[]),d.useCallback(a=>{j({x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY})},[]),d.useCallback(()=>{if(!n||!p)return;const a=n.x-p.x,C=n.y-p.y,l=a>50,c=a<-50;Math.abs(C)>Math.abs(a)||(l?x():c&&v())},[n,p,x,v]);const{data:T}=K({queryKey:["/api/dashboard/comprehensive-analytics/"],refetchInterval:3e4,enabled:i&&!o}),{data:t}=K({queryKey:["/api/insights/student/"],refetchInterval:3e4,enabled:i&&!o}),$=d.useMemo(()=>{var C,l,c,y,N,f,P,H,B,z,F,_,q,U,V,Q;const a=[];return(c=(l=(C=t==null?void 0:t.data)==null?void 0:C.llmInsights)==null?void 0:l.studyPlan)!=null&&c.insights&&t.data.llmInsights.studyPlan.insights.length>0?a.push({title:"Study Plan",items:t.data.llmInsights.studyPlan.insights.map(r=>(r==null?void 0:r.text)??r),icon:e.jsx(D,{className:"w-4 h-4"}),subtitle:"Personalized study plan"}):(y=t==null?void 0:t.data)!=null&&y.improvementTopics&&t.data.improvementTopics.length>0?a.push({title:"Study Plan",items:t.data.improvementTopics.slice(0,5).map(r=>`${r.topic} â€” ${r.accuracy}%`),icon:e.jsx(D,{className:"w-4 h-4"}),subtitle:"Recommended focus areas"}):a.push({title:"Study Plan",items:["Take tests to get AI-generated study plans!"],icon:e.jsx(D,{className:"w-4 h-4"})}),(P=(f=(N=t==null?void 0:t.data)==null?void 0:N.llmInsights)==null?void 0:f.lastTestFeedback)!=null&&P.insights&&t.data.llmInsights.lastTestFeedback.insights.length>0?a.push({title:"Last Test Recommendations",items:t.data.llmInsights.lastTestFeedback.insights.map(r=>(r==null?void 0:r.text)??r),icon:e.jsx(M,{className:"w-4 h-4"}),subtitle:"AI feedback on your last test"}):(H=t==null?void 0:t.data)!=null&&H.lastTestTopics&&t.data.lastTestTopics.length>0?a.push({title:"Last Test Recommendations",items:t.data.lastTestTopics.slice(0,5).map(r=>`${r.topic} â€” ${r.accuracy}%`),icon:e.jsx(M,{className:"w-4 h-4"})}):a.push({title:"Last Test Recommendations",items:["Complete a test to get AI feedback!"],icon:e.jsx(M,{className:"w-4 h-4"})}),(F=(z=(B=t==null?void 0:t.data)==null?void 0:B.llmInsights)==null?void 0:z.strengths)!=null&&F.insights&&t.data.llmInsights.strengths.insights.length>0?a.push({title:"Strengths",items:t.data.llmInsights.strengths.insights.map(r=>(r==null?void 0:r.text)??r),icon:e.jsx(E,{className:"w-4 h-4"})}):(_=t==null?void 0:t.data)!=null&&_.strengthTopics&&t.data.strengthTopics.length>0?a.push({title:"Strengths",items:t.data.strengthTopics.slice(0,5).map(r=>`${r.topic} â€” ${r.accuracy}%`),icon:e.jsx(E,{className:"w-4 h-4"})}):a.push({title:"Strengths",items:["Take tests to get AI analysis of your strengths!"],icon:e.jsx(E,{className:"w-4 h-4"})}),(V=(U=(q=t==null?void 0:t.data)==null?void 0:q.llmInsights)==null?void 0:U.weaknesses)!=null&&V.insights&&t.data.llmInsights.weaknesses.insights.length>0?a.push({title:"Weaknesses",items:t.data.llmInsights.weaknesses.insights.map(r=>(r==null?void 0:r.text)??r),icon:e.jsx(L,{className:"w-4 h-4"})}):(Q=t==null?void 0:t.data)!=null&&Q.weakTopics&&t.data.weakTopics.length>0?a.push({title:"Weaknesses",items:t.data.weakTopics.slice(0,5).map(r=>`${r.topic} â€” ${r.accuracy}%`),icon:e.jsx(L,{className:"w-4 h-4"})}):a.push({title:"Weaknesses",items:["Take tests to get AI analysis of your weaknesses!"],icon:e.jsx(L,{className:"w-4 h-4"})}),a},[t,T]);if(d.useEffect(()=>{if(u.current){const a=u.current.querySelector(`[data-tab-id="${s}"]`);a&&a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[s]),d.useEffect(()=>{var a;Se(),t&&(console.log("Insights data:",t),console.log("Cache info:",t.cacheInfo),(a=t.cacheInfo)!=null&&a.lastModified&&(console.log("Last modified:",t.cacheInfo.lastModified),console.log("Formatted time:",k(t.cacheInfo.lastModified))))},[t]),!i)return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-indigo-50",children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Checking authentication..."})}):(m("/login"),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-indigo-50",children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Redirecting to login..."})}));const g=T&&T.totalTests>0;return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 text-text",children:[e.jsx(pe,{}),e.jsx("main",{className:"flex-1 flex flex-col bg-gray-50 mt-20 mb-24 transition-all duration-300 md:ml-64",children:e.jsx("div",{className:"w-full max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 px-4 pt-4 items-stretch",children:[e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"h-full flex flex-col",children:g?e.jsx("div",{className:"h-full flex-1 flex",children:e.jsx("div",{className:"flex-1",children:e.jsx(ve,{sections:$,height:"100%"})})}):e.jsx(Ce,{variant:"blue",className:"h-full flex items-center",children:e.jsxs("div",{className:"w-full p-6 flex flex-col items-center justify-center gap-4 max-w-xl mx-auto text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(we,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Get personalized insights"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Take your first practice test to unlock AI study plans, strengths and weaknesses analysis."}),e.jsx("div",{className:"w-full mt-3 flex justify-center",children:e.jsx(b,{variant:"default",size:"lg",onClick:()=>m("/topics"),className:"rounded-lg font-bold px-6",children:"Take a Test"})})]})})})}),e.jsx("div",{className:"h-full",children:e.jsx(ke,{analytics:T})}),e.jsx("div",{className:"min-h-0 h-full",children:e.jsx(Te,{className:"max-w-full h-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"pb-4",children:e.jsx(Ie,{type:"app"})}),e.jsx("div",{children:e.jsx($e,{})})]})]})})})]})}export{Be as default};
