import{a as x,u as j,r as l,ap as N,j as e,aq as g,ar as v,q as w,f as y,k as S,L as C,av as k,$ as I,A as h,x as P}from"./index-CeAo0rRa.js";import{S as $}from"./profile-avatar-Dp0hL2ct.js";import{S as A}from"./scroll-area-BjYbL3u-.js";import{N as E,F as T}from"./notepad-text-D9QnkOl1.js";function H({item:s,currentPath:i,navigate:c}){const n=s.activePattern?s.activePattern.test(i):i===s.to,a=!!s.disabled;return e.jsx("li",{role:"none",children:e.jsxs("button",{onClick:()=>{a||(s.onClick?s.onClick():c(s.to))},role:"menuitem","aria-label":s.text,"aria-disabled":a,disabled:a,className:`group w-full flex items-center rounded-lg transition-all duration-200 focus:outline-none px-4 py-3 text-left ${n?"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-600 font-medium shadow-sm":"text-gray-700 hover:bg-blue-50"} ${a?"filter blur-sm opacity-60 cursor-not-allowed":""}`,children:[e.jsx("div",{className:`flex items-center justify-center transition-colors duration-200 group-hover:text-blue-600 mr-3 ${n?"text-blue-600":"text-gray-600"} ${a?"text-gray-400":""}`,children:s.icon}),e.jsx("span",{className:"text-base whitespace-nowrap overflow-hidden flex-1",children:s.text}),s.expandable&&e.jsx("div",{className:`transition-colors duration-200 ${n?"text-blue-600":"text-gray-500"}`,children:s.expanded?e.jsx(k,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})})]})})}function M(){const[,s]=x();j();const[i,c]=l.useState([]),[n,a]=l.useState(new Set),m=()=>({Authorization:`Bearer ${P()}`,"Content-Type":"application/json"}),u=async()=>{try{const t=`${h.BASE_URL}${h.ENDPOINTS.CHAT_SESSIONS}`,o=await fetch(t,{headers:m()});if(o.ok){const p=(await o.json()).results||[];c(p)}else console.error("Failed to load sessions:",o.status)}catch(t){console.error("Failed to load chat sessions:",t)}};l.useEffect(()=>{u()},[]);const b="md:left-64";N();const f=[{to:"/",text:"Home",icon:e.jsx(g,{className:"h-5 w-5"}),activePattern:/^\/$/},{to:"/topics",text:"Test",icon:e.jsx(E,{className:"h-5 w-5"}),activePattern:/^\/topics/},{to:"/institution-tests",text:"Institution Tests",icon:e.jsx(v,{className:"h-5 w-5"}),activePattern:/^\/institution-tests/},{to:"/dashboard",text:"Analysis",icon:e.jsx(T,{className:"h-5 w-5"}),activePattern:/^\/dashboard/},{to:"/chatbot",text:"Chatbot",icon:e.jsx(w,{className:"h-5 w-5"}),activePattern:/^\/chatbot/,onClick:()=>{r.startsWith("/chatbot")?a(t=>{const o=new Set(t);return o.has("chatbot")?o.delete("chatbot"):o.add("chatbot"),o}):(s("/chatbot"),a(t=>new Set([...t,"chatbot"])))},expandable:!0,expanded:n.has("chatbot")}],[r]=x();return l.useEffect(()=>{r.startsWith("/chatbot")&&a(t=>new Set([...t,"chatbot"]))},[r]),e.jsxs(e.Fragment,{children:[e.jsx("header",{className:`flex items-center justify-end fixed top-0 ${b} right-0 z-50 h-20 bg-white border-b transition-all duration-300`,role:"banner",children:e.jsxs("div",{className:"flex items-center justify-end pr-3 space-x-3",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>s("/payment"),className:"aspect-square bg-orange-100 rounded-full h-12 w-12","aria-label":"Go to Payment",children:e.jsx(S,{className:"h-5 w-5 text-amber-600"})}),e.jsx($,{})]})}),e.jsxs("aside",{className:"fixed top-0 left-0 h-full bg-white z-40 shadow-md overflow-hidden flex flex-col",style:{width:"256px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},"aria-label":"Main sidebar navigation",children:[e.jsx("div",{className:"flex items-center h-20 mb-2 border-b justify-start px-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:C,alt:"InzightEd Logo",className:"h-9 pt-1"})})}),e.jsxs("nav",{className:"flex-1 flex flex-col justify-between overflow-y-auto py-4",children:[e.jsxs("div",{className:"px-3",children:[e.jsx("div",{className:"px-3 mb-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Main Menu"})}),e.jsx("ul",{className:"space-y-2",role:"menu",children:f.map(t=>{const d={...t,disabled:!1};return e.jsx(H,{item:d,currentPath:r,navigate:s},t.to)})}),n.has("chatbot")&&e.jsx("div",{className:"mt-2",children:e.jsx(A,{className:"max-h-40",children:e.jsx("div",{className:"space-y-1",children:i.map(t=>e.jsx("button",{onClick:()=>s(`/chatbot?session=${t.chatSessionId}`),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg truncate",children:t.sessionTitle||`Chat ${t.id}`},t.chatSessionId))})})})]}),e.jsx("div",{className:"mt-auto px-3",children:e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-xl",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm",children:"U"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"User Name"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Role/Institution"})]})]})})]})]})]})}export{M as H};
