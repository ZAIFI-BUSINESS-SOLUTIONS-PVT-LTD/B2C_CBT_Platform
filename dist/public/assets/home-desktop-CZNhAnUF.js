import{r as m,j as e,l as le,m as ie,n as re,o as ne,a as O,S as A,C as k,p as oe,b as S,q as ce,f as y,I as de,s as me,t as he,v as xe,w as ue,A as Y,x as ge,u as ee,G as fe,h as pe,i as J,T as R,c as te,d as se,B as ae,e as je,g as be}from"./index-D0_LpoOS.js";import{H as we}from"./header-desktop-DRVedpQw.js";import{T as ye}from"./timer-BUxsc4uR.js";import{C as Ne,H as M,N as L,S as ve}from"./share-2-NbH3wR12.js";import{A as X}from"./arrow-right-CZqWqP1f.js";import{T as E}from"./trophy-DRb042JG.js";import{L as Z}from"./notepad-text-BSluFLZW.js";import{T as Te}from"./target-hK32z5Hz.js";import"./profile-avatar-D3iRSJzO.js";import"./scroll-area-CwidVopV.js";const ke=({sections:l=[],emptyMessage:r="No content available",height:o=330})=>{const[a,d]=m.useState(0);if(!Array.isArray(l)||l.length===0)return e.jsx("p",{className:"text-gray-500 text-center py-4",children:r});const c=l[a],b=()=>d(h=>h===0?l.length-1:h-1),g=()=>d(h=>h===l.length-1?0:h+1),p=typeof o=="number"?`${o}px`:o;return e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"card rounded-2xl border border-gray-250 bg-white w-full relative h-full flex flex-col",style:{height:p,overflow:"visible"},children:[e.jsxs("div",{className:"py-6 px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c.icon&&e.jsx("span",{className:"inline-flex items-center",children:c.icon}),e.jsx("h3",{className:"text-primary text-xl font-semibold",children:c.title}),c.tag&&(c.tagTooltip?e.jsx(le,{children:e.jsxs(ie,{children:[e.jsx(re,{asChild:!0,children:e.jsx("span",{className:"ml-2 inline-flex",children:c.tag})}),e.jsx(ne,{children:c.tagTooltip})]})}):e.jsx("span",{className:"ml-2",children:c.tag}))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{"aria-label":"Previous section",onClick:b,className:"flex items-center justify-center w-8 h-8 rounded-md bg-white border border-gray-200 hover:bg-gray-200 text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("button",{"aria-label":"Next section",onClick:g,className:"flex items-center justify-center w-8 h-8 rounded-md bg-white border border-gray-200 hover:bg-gray-200 text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})})]})]}),c.subtitle&&e.jsx("div",{className:"text-gray-500 text-sm mt-1",children:c.subtitle})]}),e.jsx("div",{className:"px-6 py-2 flex-1 overflow-y-auto flex items-start justify-center",children:Array.isArray(c.items)&&c.items.length>0?e.jsx("ul",{className:"space-y-3 w-full max-w-3xl",children:c.items.map((h,x)=>e.jsxs("li",{className:"flex items-start gap-3 text-gray-800 leading-relaxed",children:[e.jsx("div",{className:"flex-shrink-0 mt-2",children:e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-700"})}),e.jsx("div",{className:"text-md",children:h})]},x))}):e.jsxs("div",{className:"text-gray-500 text-xl",children:["No ",c.title.toLowerCase()," available."]})}),e.jsx("div",{className:"flex items-center justify-center pb-5",children:e.jsx("div",{className:"flex gap-2",children:l.map((h,x)=>e.jsx("button",{onClick:()=>d(x),"aria-label":`Go to section ${x+1}`,className:`w-2 h-2 rounded-full transition-all duration-300 ${a===x?"bg-secondary w-6":"bg-gray-300 hover:bg-gray-400"}`},x))})})]})})};function Se({className:l=""}){const[,r]=O(),o=["How can I improve my algebra?","Create a 2-week study plan","Time management tips for exams"],[a,d]=m.useState(""),[c,b]=m.useState(!1),[g,p]=m.useState(!1),[h,x]=m.useState(!1),[v,C]=m.useState(A.DEFAULT_LANGUAGE),f=m.useRef(null);m.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;if(t){x(!0);const n=new t;n.continuous=A.RECOGNITION_SETTINGS.continuous,n.interimResults=A.RECOGNITION_SETTINGS.interimResults,n.lang=v,n.maxAlternatives=A.RECOGNITION_SETTINGS.maxAlternatives,n.onresult=w=>{let j="";for(let u=0;u<w.results.length;u++)j+=w.results[u][0].transcript;d(j),setTimeout(()=>{const u=document.querySelector('textarea[placeholder="Ask anything..."]');u&&(u.style.height="auto",u.style.height=u.scrollHeight+"px")},0)},n.onstart=()=>p(!0),n.onend=()=>p(!1),n.onerror=()=>p(!1),f.current=n}else x(!1);return()=>{f.current&&f.current.abort()}},[v]);const N=()=>({Authorization:`Bearer ${ge()}`,"Content-Type":"application/json"}),s=t=>{if(!t)return"New Chat";let n=t.trim();return n.length>40&&(n=n.slice(0,40).trim()+"..."),n.charAt(0).toUpperCase()+n.slice(1)},$=async t=>{try{b(!0);const n=`${Y.BASE_URL}${Y.ENDPOINTS.CHAT_SESSIONS}`,w=s(t),j=await fetch(n,{method:"POST",headers:N(),body:JSON.stringify({sessionTitle:w})});if(j.ok){const u=await j.json();r(`/chatbot?sessionId=${u.chatSessionId}&message=${encodeURIComponent(t)}`)}else console.error("Failed to create session")}catch(n){console.error("Failed to create session:",n)}finally{b(!1)}},I=t=>{t.trim()&&(d(""),setTimeout(()=>{const n=document.querySelector('textarea[placeholder="Ask anything..."]');n&&(n.style.height="auto",n.style.height=n.scrollHeight+"px")},0),$(t))},P=()=>{if(h){if(g)f.current&&f.current.stop(),setTimeout(()=>{a.trim()&&I(a.trim())},100);else if(f.current)try{d(""),setTimeout(()=>{const t=document.querySelector('textarea[placeholder="Ask anything..."]');t&&(t.style.height="auto",t.style.height=t.scrollHeight+"px")},0),f.current.start()}catch(t){console.error("Failed to start speech recognition:",t),p(!1)}}};return e.jsx("div",{className:`w-full h-full ${l}`,children:e.jsxs(k,{className:"bg-gradient-to-br from-white via-white to-slate-50/50 rounded-2xl shadow-xl backdrop-blur-sm h-full flex flex-col",children:[e.jsx(oe,{shineColor:["#a855f7","#3b82f6","#0ea5e9"]}),e.jsx("div",{className:"absolute inset-0 -z-10 pointer-events-none overflow-hidden rounded-2xl",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",viewBox:"0 0 800 600","aria-hidden":!0,children:[e.jsxs("defs",{children:[e.jsxs("pattern",{id:"diagonalLines",patternUnits:"userSpaceOnUse",width:"120",height:"120",patternTransform:"rotate(22)",children:[e.jsx("rect",{width:"120",height:"120",fill:"transparent"}),e.jsx("path",{d:"M0 120 L120 0",stroke:"rgba(15,23,42,0.04)",strokeWidth:"1"})]}),e.jsxs("linearGradient",{id:"softGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#eef2ff",stopOpacity:"1"})]})]}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#diagonalLines)"}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#softGradient)",opacity:"0.06"})]})}),e.jsxs(S,{className:"p-4 flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 blur-md opacity-30"}),e.jsx("div",{className:"relative w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 flex items-center justify-center shadow-xl ring-2 ring-white/40",children:e.jsx(ce,{className:"h-6 w-6 text-white drop-shadow-sm"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-md text-slate-600 mt-0.5 font-medium leading-relaxed",children:"Your own personal AI study assistant"})})]})}),e.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center px-3 py-2",children:e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-4",children:h&&g?e.jsxs("div",{className:"flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-emerald-50 via-green-50 to-emerald-50 rounded-2xl border border-green-200/60 shadow-sm backdrop-blur-sm",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm",style:{animationDelay:"400ms"}})]}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Listening... Tap âœ“ to send"})]}):h?e.jsxs("div",{className:"w-full max-w-sm text-center",children:[e.jsx("div",{className:"mt-3",children:e.jsx(y,{size:"lg",variant:"default",onClick:()=>r("/chatbot"),className:"rounded-xl px-4",children:"Go to Chatbot"})}),e.jsx("div",{className:"mt-3 flex flex-wrap justify-center gap-2",children:o.map(t=>e.jsx(y,{size:"sm",variant:"ghost",onClick:()=>$(t),className:"rounded-xl border px-3 py-2 text-sm min-w-[10rem] max-w-xs truncate",children:t},t))})]}):e.jsx("div",{className:"text-xs text-slate-500 text-center py-3 px-4 bg-slate-50/50 rounded-xl border border-slate-200/50",children:"Voice input not supported"})})}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(de,{value:a,onChange:t=>d(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),a.trim()&&I(a.trim()))},placeholder:"Ask anything...",disabled:c,className:"border-slate-200/80 rounded-full text-sm focus:border-blue-300 focus:ring-blue-100 focus:ring-1 shadow-sm transition-all duration-200 bg-white/80 backdrop-blur-sm group-hover:shadow-md pl-4 pr-20 h-12"}),e.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[h&&e.jsx(y,{type:"button",size:"icon",variant:"ghost",onClick:P,disabled:c,className:`h-10 w-10 p-0 rounded-full transition-all duration-200 hover:scale-105 ${g?"text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:g?e.jsx(me,{className:"h-6 w-6"}):e.jsx(he,{className:"h-6 w-6"})}),e.jsx(y,{type:"button",size:"icon",onClick:()=>{a.trim()&&I(a.trim())},disabled:!a.trim()||c,className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100",children:c?e.jsx(xe,{className:"h-4 w-4 animate-spin"}):e.jsx(ue,{className:"h-4 w-4"})})]})]})})})]})]})})}function Ce({analytics:l}){const{student:r}=ee(),[,o]=O();return m.useMemo(()=>r?r.fullName&&r.fullName.trim().length>0?r.fullName.trim():r.email&&r.email.includes("@")?r.email.split("@")[0]:"Student":"Student",[r]),e.jsx("div",{className:"text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(k,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(S,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(fe,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Your Average Score"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:l?`${Math.round(l.overallAccuracy??0)} %`:"0 %"})})]})}),e.jsx(k,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(S,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(ye,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Avg. Speed /Question"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:l?`${Math.round(l.averageTimePerQuestion??0)} sec.`:"0 sec."})})]})}),e.jsx(k,{className:"rounded-2xl border bg-white flex flex-col justify-between overflow-hidden",children:e.jsxs(S,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-md bg-blue-100 text-[1rem] sm:text-[1.125rem]",children:e.jsx(Ne,{className:"h-4 w-4 text-blue-600"})})}),e.jsx("span",{className:"block text-gray-500 text-sm font-medium mb-1 text-left",children:"Questions attended"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight flex-1 text-left",children:l?`${l.uniqueQuestionsAttempted??0}`:"0"})})]})}),e.jsxs(k,{className:"rounded-2xl border transition-transform duration-150 hover:-translate-y-0.5 hover:shadow-lg cursor-pointer overflow-hidden flex flex-col justify-center h-full bg-white",onClick:()=>o("/dashboard"),children:[e.jsx(S,{className:"relative z-10 p-3 flex items-center justify-center h-28 sm:h-24",children:e.jsxs("div",{role:"link",className:"text-sm md:text-base text-black font-bold flex items-center gap-2",tabIndex:0,onClick:a=>{a.stopPropagation(),o("/dashboard")},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),o("/dashboard"))},children:["View more",e.jsx(X,{className:"h-4 w-4 ml-1 text-black"})]})}),e.jsx("div",{className:"hidden lg:block absolute right-0 top-0 h-full w-1 bg-white/20","aria-hidden":!0})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-0 mt-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{children:e.jsxs(y,{variant:"default",size:"lg",onClick:()=>o("/topics"),"aria-label":"View Test ArrowRight",className:"w-full rounded-xl font-bold",children:["Take a Test",e.jsx(X,{className:"h-4 w-4 ml-2"})]})})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{children:e.jsxs(y,{variant:"outline",size:"lg",onClick:()=>o("/topics"),"aria-label":"View Test History",className:"w-full rounded-xl border border-blue-500 bg-blue-50 text-blue-600",children:["View Test History",e.jsx(M,{className:"h-4 w-4 ml-2"})]})})})]})})]})})}const T=l=>{if(!l)return"just now";try{const r=new Date(l);if(isNaN(r.getTime()))return"just now";const a=Math.floor((new Date().getTime()-r.getTime())/1e3);return a<0||a<60?"just now":a<3600?`${Math.floor(a/60)} minute${Math.floor(a/60)===1?"":"s"} ago`:a<86400?`${Math.floor(a/3600)} hour${Math.floor(a/3600)===1?"":"s"} ago`:a<604800?`${Math.floor(a/86400)} day${Math.floor(a/86400)===1?"":"s"} ago`:a<2592e3?`${Math.floor(a/604800)} week${Math.floor(a/604800)===1?"":"s"} ago`:a<31536e3?`${Math.floor(a/2592e3)} month${Math.floor(a/2592e3)===1?"":"s"} ago`:`${Math.floor(a/31536e3)} year${Math.floor(a/31536e3)===1?"":"s"} ago`}catch(r){return console.warn("Error parsing date for relative time:",l,r),"just now"}},Ie=()=>{const l=new Date;console.log("Testing formatRelativeTime function:"),console.log("Just now:",T(l.toISOString())),console.log("5 minutes ago:",T(new Date(l.getTime()-5*60*1e3).toISOString())),console.log("2 hours ago:",T(new Date(l.getTime()-2*60*60*1e3).toISOString())),console.log("1 day ago:",T(new Date(l.getTime()-24*60*60*1e3).toISOString())),console.log("Invalid date:",T("invalid-date")),console.log("Null:",T(null))},D={container:"p-3 rounded-xl",text:"text-sm",variants:{blue:{container:"bg-gray-200",text:"text-gray-700",accent:"text-blue-600",accentBg:"bg-blue-50"},indigo:{container:"bg-gray-200",text:"text-gray-700",accent:"text-indigo-600",accentBg:"bg-indigo-50"},green:{container:"bg-gray-200",text:"text-gray-700",accent:"text-green-600",accentBg:"bg-green-50"},red:{container:"bg-gray-200",text:"text-gray-700",accent:"text-red-600",accentBg:"bg-red-50"},gray:{container:"bg-gray-200",text:"text-gray-700",accent:"text-gray-600",accentBg:"bg-gray-50"}}},$e=({children:l,variant:r,className:o=""})=>{const a=D.variants[r];return e.jsx("div",{className:`${D.container} ${a.container} ${o}`,children:e.jsx("div",{className:`${D.text} ${a.text}`,children:l})})},Ae=({title:l="Check out my NEET preparation progress!",description:r="I'm preparing for NEET 2026 with InzightEd. Join me on this journey!",url:o=window.location.origin,type:a="app",score:d,subject:c,className:b=""})=>{const[g,p]=m.useState(!1),x=(()=>{switch(a){case"achievement":return{title:`ðŸ† Achievement Unlocked! ${d?`Scored ${d}%`:""}`,description:`I just achieved a milestone in my NEET preparation! ${c?`in ${c}`:""}`,emoji:"ðŸ†"};case"result":return{title:`ðŸ“Š Test Result: ${d?`${d}%`:"Completed"}`,description:`Just completed a ${c||"practice"} test. ${d?`Scored ${d}%!`:"Keep practicing!"} `,emoji:"ðŸ“Š"};case"progress":return{title:"ðŸ“ˆ Study Progress Update",description:`Making great progress in my NEET preparation journey! ${d?`${d}% complete`:""}`,emoji:"ðŸ“ˆ"};default:return{title:l,description:r,emoji:"ðŸŽ¯"}}})(),v=`${x.emoji} ${x.title}

${x.description}

${o}`,C=async()=>{try{await navigator.clipboard.writeText(v),p(!0),setTimeout(()=>p(!1),2e3)}catch(s){console.error("Failed to copy:",s)}},f=async()=>{if("share"in navigator)try{await navigator.share({title:x.title,text:x.description,url:o})}catch(s){console.log("Error sharing:",s)}},N=[{name:"Copy Link",icon:be,action:C,color:"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200",available:!0}];return e.jsx("div",{className:`h-full ${b}`,children:e.jsxs(k,{className:"bg-white border shadow-lg",children:[e.jsx(te,{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx(se,{className:"text-xl font-semibold text-gray-800",children:"Study with your friends"}),e.jsx("p",{className:"text-base text-gray-600",children:"Share with your friends and prepare with them together"})]})}),a!=="app"&&e.jsxs(ae,{variant:"secondary",className:"bg-gray-100 text-gray-700 border-gray-200",children:[a==="achievement"&&e.jsx(E,{className:"w-4 h-4 mr-1"}),a==="result"&&e.jsx(Te,{className:"w-4 h-4 mr-1"}),a==="progress"&&e.jsx(je,{className:"w-4 h-4 mr-1"}),a.charAt(0).toUpperCase()+a.slice(1)]})]})}),e.jsx(S,{className:"px-6 pb-6",children:e.jsxs("div",{className:"space-y-3",children:[N.map(s=>e.jsxs(y,{variant:"outline",size:"lg",onClick:s.action,className:`${s.color} font-medium w-full`,children:[e.jsx(s.icon,{className:"w-5 h-5 mr-2"}),s.name]},s.name)),"share"in navigator&&e.jsxs(y,{variant:"default",size:"lg",onClick:f,className:"w-full bg-black text-white hover:bg-gray-800 font-medium",children:[e.jsx(ve,{className:"w-5 h-5 mr-2"}),"Share with friends"]})]})})]})})},Me=()=>{const r=(()=>{const o=new Date("2026-05-03"),a=new Date,d=o.getTime()-a.getTime(),c=Math.ceil(d/(1e3*3600*24));return Math.max(0,c)})();return e.jsx("div",{children:e.jsx(k,{className:"bg-black/70 backdrop-blur-xl shadow-2xl",children:e.jsx(te,{className:"py-3 px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx(se,{className:"text-xl font-semibold text-white",children:"NEET 2026"}),e.jsx("p",{className:"text-base text-gray-300",children:"Exam date: May 3, 2026"})]})}),e.jsx(ae,{variant:"secondary",className:"bg-white/10 text-blue-500 border-blue-500 backdrop-blur-sm pt-1",children:r===1?"1 Day Left":`${r} Days Left`})]})})})})};function Fe(){const{isAuthenticated:l,loading:r,student:o}=ee(),[,a]=O();pe();const d=!!(o!=null&&o.institution);m.useEffect(()=>{console.log("ðŸ« Institution check (Desktop):",{student:o,hasInstitution:d,institutionData:o==null?void 0:o.institution})},[o,d]);const[c,b]=m.useState(0),[g,p]=m.useState(null),[h,x]=m.useState(null);m.useState(!1),m.useRef(null);const v=m.useRef(null),C=m.useCallback(()=>{b(t=>(t+1)%4)},[]),f=m.useCallback(()=>{b(t=>(t-1+4)%4)},[]);m.useCallback(t=>{x(null),p({x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY})},[]),m.useCallback(t=>{x({x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY})},[]),m.useCallback(()=>{if(!g||!h)return;const t=g.x-h.x,n=g.y-h.y,w=t>50,j=t<-50;Math.abs(n)>Math.abs(t)||(w?C():j&&f())},[g,h,C,f]);const{data:N}=J({queryKey:["/api/dashboard/comprehensive-analytics/"],refetchInterval:3e4,enabled:l&&!r}),{data:s}=J({queryKey:["/api/insights/student/"],refetchInterval:3e4,enabled:l&&!r}),$=m.useMemo(()=>{var n,w,j,u,G,H,z,B,F,_,q,U,V,Q,W,K;const t=[];return(j=(w=(n=s==null?void 0:s.data)==null?void 0:n.llmInsights)==null?void 0:w.studyPlan)!=null&&j.insights&&s.data.llmInsights.studyPlan.insights.length>0?t.push({title:"Study Plan",items:s.data.llmInsights.studyPlan.insights.map(i=>(i==null?void 0:i.text)??i),icon:e.jsx(L,{className:"w-4 h-4"}),subtitle:"Personalized study plan"}):(u=s==null?void 0:s.data)!=null&&u.improvementTopics&&s.data.improvementTopics.length>0?t.push({title:"Study Plan",items:s.data.improvementTopics.slice(0,5).map(i=>`${i.topic} â€” ${i.accuracy}%`),icon:e.jsx(L,{className:"w-4 h-4"}),subtitle:"Recommended focus areas"}):t.push({title:"Study Plan",items:["Take tests to get AI-generated study plans!"],icon:e.jsx(L,{className:"w-4 h-4"})}),(z=(H=(G=s==null?void 0:s.data)==null?void 0:G.llmInsights)==null?void 0:H.lastTestFeedback)!=null&&z.insights&&s.data.llmInsights.lastTestFeedback.insights.length>0?t.push({title:"Last Test Recommendations",items:s.data.llmInsights.lastTestFeedback.insights.map(i=>(i==null?void 0:i.text)??i),icon:e.jsx(M,{className:"w-4 h-4"}),subtitle:"AI feedback on your last test"}):(B=s==null?void 0:s.data)!=null&&B.lastTestTopics&&s.data.lastTestTopics.length>0?t.push({title:"Last Test Recommendations",items:s.data.lastTestTopics.slice(0,5).map(i=>`${i.topic} â€” ${i.accuracy}%`),icon:e.jsx(M,{className:"w-4 h-4"})}):t.push({title:"Last Test Recommendations",items:["Complete a test to get AI feedback!"],icon:e.jsx(M,{className:"w-4 h-4"})}),(q=(_=(F=s==null?void 0:s.data)==null?void 0:F.llmInsights)==null?void 0:_.strengths)!=null&&q.insights&&s.data.llmInsights.strengths.insights.length>0?t.push({title:"Strengths",items:s.data.llmInsights.strengths.insights.map(i=>(i==null?void 0:i.text)??i),icon:e.jsx(E,{className:"w-4 h-4"})}):(U=s==null?void 0:s.data)!=null&&U.strengthTopics&&s.data.strengthTopics.length>0?t.push({title:"Strengths",items:s.data.strengthTopics.slice(0,5).map(i=>`${i.topic} â€” ${i.accuracy}%`),icon:e.jsx(E,{className:"w-4 h-4"})}):t.push({title:"Strengths",items:["Take tests to get AI analysis of your strengths!"],icon:e.jsx(E,{className:"w-4 h-4"})}),(W=(Q=(V=s==null?void 0:s.data)==null?void 0:V.llmInsights)==null?void 0:Q.weaknesses)!=null&&W.insights&&s.data.llmInsights.weaknesses.insights.length>0?t.push({title:"Weaknesses",items:s.data.llmInsights.weaknesses.insights.map(i=>(i==null?void 0:i.text)??i),icon:e.jsx(R,{className:"w-4 h-4"})}):(K=s==null?void 0:s.data)!=null&&K.weakTopics&&s.data.weakTopics.length>0?t.push({title:"Weaknesses",items:s.data.weakTopics.slice(0,5).map(i=>`${i.topic} â€” ${i.accuracy}%`),icon:e.jsx(R,{className:"w-4 h-4"})}):t.push({title:"Weaknesses",items:["Take tests to get AI analysis of your weaknesses!"],icon:e.jsx(R,{className:"w-4 h-4"})}),t},[s,N]);if(m.useEffect(()=>{if(v.current){const t=v.current.querySelector(`[data-tab-id="${c}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[c]),m.useEffect(()=>{var t;Ie(),s&&(console.log("Insights data:",s),console.log("Cache info:",s.cacheInfo),(t=s.cacheInfo)!=null&&t.lastModified&&(console.log("Last modified:",s.cacheInfo.lastModified),console.log("Formatted time:",T(s.cacheInfo.lastModified))))},[s]),!l)return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-indigo-50",children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Checking authentication..."})}):(a("/login"),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-indigo-50",children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Redirecting to login..."})}));const I=N&&N.totalTests>0;return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 text-text",children:[e.jsx(we,{}),e.jsxs("main",{className:"flex-1 flex flex-col bg-gray-50 mt-20 mb-24 transition-all duration-300 md:ml-64 relative",children:[d&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/60 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border-2 border-gray-300 max-w-md mx-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full",children:e.jsx(Z,{className:"h-16 w-16 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-2"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"This feature is not available for institution-enrolled students. Please access your institution-specific tests and resources."})]})]})})}),e.jsx("div",{className:d?"blur-lg pointer-events-none select-none":"","aria-hidden":d,children:e.jsx("div",{className:"w-full max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 px-4 pt-4 items-stretch",children:[e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"h-full flex flex-col",children:I?e.jsx("div",{className:"h-full flex-1 flex",children:e.jsx("div",{className:"flex-1",children:e.jsx(ke,{sections:$,height:"100%"})})}):e.jsx($e,{variant:"blue",className:"h-full flex items-center",children:e.jsxs("div",{className:"w-full p-6 flex flex-col items-center justify-center gap-4 max-w-xl mx-auto text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Z,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Get personalized insights"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Take your first practice test to unlock AI study plans, strengths and weaknesses analysis."}),e.jsx("div",{className:"w-full mt-3 flex justify-center",children:e.jsx(y,{variant:"default",size:"lg",onClick:()=>a("/topics"),className:"rounded-lg font-bold px-6",children:"Take a Test"})})]})})})}),e.jsx("div",{className:"h-full",children:e.jsx(Ce,{analytics:N})}),e.jsx("div",{className:"min-h-0 h-full",children:e.jsx(Se,{className:"max-w-full h-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"pb-4",children:e.jsx(Ae,{type:"app"})}),e.jsx("div",{children:e.jsx(Me,{})})]})]})})})]})]})}export{Fe as default};
