import{a as x,u as N,r as l,al as g,j as e,am as v,an as w,q as y,f as S,k as C,L as k,av as I,$ as P,A as h,x as $}from"./index-BEhJ738t.js";import{S as A}from"./profile-avatar-DFRGjmkV.js";import{S as T}from"./scroll-area-C9EE3XgK.js";import{N as E,F as H}from"./notepad-text-5UoVvSPz.js";function F({item:s,currentPath:i,navigate:c}){const o=s.activePattern?s.activePattern.test(i):i===s.to,n=!!s.disabled;return e.jsx("li",{role:"none",children:e.jsxs("button",{onClick:()=>{n||(s.onClick?s.onClick():c(s.to))},role:"menuitem","aria-label":s.text,"aria-disabled":n,disabled:n,className:`group w-full flex items-center rounded-lg transition-all duration-200 focus:outline-none px-4 py-3 text-left ${o?"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-600 font-medium shadow-sm":"text-gray-700 hover:bg-blue-50"} ${n?"filter blur-sm opacity-60 cursor-not-allowed":""}`,children:[e.jsx("div",{className:`flex items-center justify-center transition-colors duration-200 group-hover:text-blue-600 mr-3 ${o?"text-blue-600":"text-gray-600"} ${n?"text-gray-400":""}`,children:s.icon}),e.jsx("span",{className:"text-base whitespace-nowrap overflow-hidden flex-1",children:s.text}),s.expandable&&e.jsx("div",{className:`transition-colors duration-200 ${o?"text-blue-600":"text-gray-500"}`,children:s.expanded?e.jsx(I,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]})})}function R(){const[,s]=x();N();const[i,c]=l.useState([]),[o,n]=l.useState(new Set),u=()=>({Authorization:`Bearer ${$()}`,"Content-Type":"application/json"}),m=async()=>{try{const t=`${h.BASE_URL}${h.ENDPOINTS.CHAT_SESSIONS}`,a=await fetch(t,{headers:u()});if(a.ok){const j=(await a.json()).results||[];c(j)}else console.error("Failed to load sessions:",a.status)}catch(t){console.error("Failed to load chat sessions:",t)}};l.useEffect(()=>{m()},[]);const b="md:left-64",f=g(),p=[{to:"/",text:"Home",icon:e.jsx(v,{className:"h-5 w-5"}),activePattern:/^\/$/},{to:"/topics",text:"Test",icon:e.jsx(E,{className:"h-5 w-5"}),activePattern:/^\/topics/},{to:"/institution-tests",text:"Institution Tests",icon:e.jsx(w,{className:"h-5 w-5"}),activePattern:/^\/institution-tests/},{to:"/dashboard",text:"Analysis",icon:e.jsx(H,{className:"h-5 w-5"}),activePattern:/^\/dashboard/},{to:"/chatbot",text:"Chatbot",icon:e.jsx(y,{className:"h-5 w-5"}),activePattern:/^\/chatbot/,onClick:()=>{r.startsWith("/chatbot")?n(t=>{const a=new Set(t);return a.has("chatbot")?a.delete("chatbot"):a.add("chatbot"),a}):(s("/chatbot"),n(t=>new Set([...t,"chatbot"])))},expandable:!0,expanded:o.has("chatbot")}],[r]=x();return l.useEffect(()=>{r.startsWith("/chatbot")&&n(t=>new Set([...t,"chatbot"]))},[r]),e.jsxs(e.Fragment,{children:[e.jsx("header",{className:`flex items-center justify-end fixed top-0 ${b} right-0 z-50 h-20 bg-white border-b transition-all duration-300`,role:"banner",children:e.jsxs("div",{className:"flex items-center justify-end pr-3 space-x-3",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>s("/payment"),className:"aspect-square bg-orange-100 rounded-full h-12 w-12","aria-label":"Go to Payment",children:e.jsx(C,{className:"h-5 w-5 text-amber-600"})}),e.jsx(A,{})]})}),e.jsxs("aside",{className:"fixed top-0 left-0 h-full bg-white z-40 shadow-md overflow-hidden flex flex-col",style:{width:"256px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},"aria-label":"Main sidebar navigation",children:[e.jsx("div",{className:"flex items-center h-20 mb-2 border-b justify-start px-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:k,alt:"InzightEd Logo",className:"h-9 pt-1"})})}),e.jsxs("nav",{className:"flex-1 flex flex-col justify-between overflow-y-auto py-4",children:[e.jsxs("div",{className:"px-3",children:[e.jsx("div",{className:"px-3 mb-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Main Menu"})}),e.jsx("ul",{className:"space-y-2",role:"menu",children:p.map(t=>{const a=f&&["Test","Analysis","Chatbot"].includes(t.text),d={...t,disabled:a};return e.jsx(F,{item:d,currentPath:r,navigate:s},t.to)})}),o.has("chatbot")&&e.jsx("div",{className:"mt-2",children:e.jsx(T,{className:"max-h-40",children:e.jsx("div",{className:"space-y-1",children:i.map(t=>e.jsx("button",{onClick:()=>s(`/chatbot?session=${t.chatSessionId}`),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg truncate",children:t.sessionTitle||`Chat ${t.id}`},t.chatSessionId))})})})]}),e.jsx("div",{className:"mt-auto px-3",children:e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-xl",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm",children:"U"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"User Name"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Role/Institution"})]})]})})]})]})]})}export{R as H};
