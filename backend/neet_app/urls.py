# backend/neet_app/urls.py
from django.contrib import admin
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import (
    TopicViewSet, QuestionViewSet, TestSessionViewSet, TestAnswerViewSet,
    StudentProfileViewSet, ReviewCommentViewSet,
    dashboard_analytics, dashboard_comprehensive_analytics, 
    sync_neo4j_to_postgresql, reset_chapter_structure,sync_questions_from_neo4j
)

# Initialize DefaultRouter with default trailing_slash behavior (True)
# This will make all URLs generated by this router have a trailing slash
router = DefaultRouter()
router.register(r'topics', TopicViewSet, basename='topic')
router.register(r'questions', QuestionViewSet, basename='question')
router.register(r'test-sessions', TestSessionViewSet, basename='test-session')
router.register(r'test-answers', TestAnswerViewSet, basename='test-answer')
router.register(r'student-profile', StudentProfileViewSet, basename='student-profile')
router.register(r'review-comments', ReviewCommentViewSet, basename='review-comment')


urlpatterns = [
    path('', include(router.urls)),
    path('topics/delete-all/', TopicViewSet.as_view({'delete': 'delete_all'}), name='topics-delete-all'),
    path('dashboard/analytics/', dashboard_analytics, name='dashboard-analytics'),
    path('dashboard/reset-chapter-structure/', reset_chapter_structure, name='reset-chapter-structure'),
    path('dashboard/sync-neo4j-to-postgresql/', sync_neo4j_to_postgresql, name='sync-neo4j-to-postgresql'),
    path('dashboard/comprehensive-analytics/', dashboard_comprehensive_analytics, name='dashboard-comprehensive-analytics'),
    path('dashboard/sync-questions-from-neo4j/', sync_questions_from_neo4j, name='sync-questions-from-neo4j'),
]